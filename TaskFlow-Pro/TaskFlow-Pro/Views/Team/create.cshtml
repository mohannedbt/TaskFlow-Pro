@model TaskFlow_Pro.Models.CreateTeamViewModel
@{
    ViewData["Title"] = "Create Team";
    var isOwner = User.IsInRole("Owner");
    var isAdmin = User.IsInRole("Admin");
    var canManage = isOwner || isAdmin;
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h3 class="fw-bold text-slate-900 mb-1">Create a Team</h3>
        <p class="text-muted small mb-0">Add a new team to your workspace.</p>
    </div>
    <a asp-controller="Workspace" asp-action="Index" class="btn btn-outline-secondary rounded-pill fw-bold">
        <i class="bi bi-arrow-left me-1"></i> Back
    </a>
</div>

@if (!canManage)
{
    <div class="alert alert-danger border-0 rounded-4">
        You don't have permission to create teams.
    </div>
    return;
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger border-0 shadow-sm rounded-4 mb-4">
        <i class="bi bi-exclamation-triangle me-2"></i>
        @TempData["Error"]
    </div>
}

<div class="card border-0 shadow-sm rounded-4">
    <div class="card-body p-4 p-md-5">
        <form asp-action="Create" method="post">
            @Html.AntiForgeryToken()

            <div asp-validation-summary="ModelOnly" class="alert alert-danger border-0 small rounded-3 mb-4"></div>

            <div class="mb-3">
                <label asp-for="Name" class="form-label-tiny mb-1">Team Name</label>
                <input asp-for="Name" class="form-control border-0 bg-light py-2 rounded-3" placeholder="e.g. Backend Squad" />
                <span asp-validation-for="Name" class="text-danger x-small mt-1 d-block"></span>
            </div>

            <div class="mb-4">
                <label asp-for="Description" class="form-label-tiny mb-1">Description (optional)</label>
                <textarea asp-for="Description" class="form-control border-0 bg-light rounded-3" rows="4"
                          placeholder="What does this team own? (projects, responsibilities...)"></textarea>
                <span asp-validation-for="Description" class="text-danger x-small mt-1 d-block"></span>
            </div>

            <button type="submit" class="btn btn-primary w-100 fw-bold py-2 rounded-3 shadow-sm">
                <i class="bi bi-plus-lg me-1"></i> Create Team
            </button>
        </form>
    </div>
</div>

<style>
    .text-slate-900 { color: #0f172a; }
    .form-label-tiny { font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; color: #64748b; }
    .x-small { font-size: 0.72rem; }
</style>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
